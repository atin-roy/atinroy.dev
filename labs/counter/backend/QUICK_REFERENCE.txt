â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                  COUNTER BACKEND - QUICK REFERENCE CARD                      â•‘
â•‘                      Spring Boot REST API Reference                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ DOCUMENTATION FILES (Read in this order)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1. README_START_HERE.md          â†’ Quick overview & navigation
2. ARCHITECTURE_GUIDE.md         â†’ Complete flow & all concepts
3. src/main/java/.../entity/README.md       â†’ Database models
4. src/main/java/.../repository/README.md   â†’ Query layer
5. src/main/java/.../dto/README.md          â†’ API contracts
6. src/main/java/.../mapper/README.md       â†’ DTO conversion
7. src/main/java/.../controller/README.md   â†’ HTTP endpoints
8. src/main/java/.../security/README.md     â†’ Authentication

ğŸ”„ REQUEST FLOW (30 seconds)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
HTTP Request
    â†“
SecurityConfig (Authentication + Authorization)
    â†“
ApiController (Validate + Check ownership)
    â†“
Repository (Query database)
    â†“
Entity (JPA manages this)
    â†“
Mapper (Entity â†’ DTO)
    â†“
HTTP Response (JSON)

ğŸ—ï¸ PACKAGE STRUCTURE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
security/          Authentication & Authorization
    â”œâ”€â”€ SecurityConfig.java              â† Security rules
    â””â”€â”€ CustomUserDetailsService.java    â† Load user from DB

controller/        HTTP Endpoints
    â””â”€â”€ ApiController.java               â† 8 REST endpoints

dto/               API Contracts (Input/Output)
    â”œâ”€â”€ user/CreateUserRequest.java      â† Register form
    â”œâ”€â”€ user/UserResponse.java           â† User in response
    â”œâ”€â”€ counter/CreateCounterRequest.java â† Create counter form
    â”œâ”€â”€ counter/UpdateCounterRequest.java â† Update counter form
    â”œâ”€â”€ counter/IncrementCounterRequest.java â† Increment form
    â””â”€â”€ counter/CounterResponse.java     â† Counter in response

entity/            Database Models
    â”œâ”€â”€ User.java                        â† users table
    â””â”€â”€ Counter.java                     â† counters table

repository/        Database Queries (Spring Data JPA)
    â”œâ”€â”€ UserRepository.java              â† User queries
    â””â”€â”€ CounterRepository.java           â† Counter queries

mapper/            Entity â†” DTO Conversion (MapStruct)
    â””â”€â”€ UserMapper.java                  â† User conversion

ğŸŒ THE 8 REST ENDPOINTS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1. POST   /api/users                           â†’ Register (public)
2. GET    /api/users/{userId}                  â†’ Get profile (auth required)
3. GET    /api/users?username=...              â†’ Search users (auth required)
4. POST   /api/users/{userId}/counters         â†’ Create counter (auth required)
5. GET    /api/users/{userId}/counters         â†’ List counters (auth required)
6. PATCH  /api/users/{userId}/counters/{id}   â†’ Update counter (auth required)
7. PATCH  /api/users/{userId}/counters/{id}/increment â†’ Increment (auth required)
8. DELETE /api/users/{userId}/counters/{id}   â†’ Delete counter (auth required)

ğŸ” SECURITY (Three Layers)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Layer 1: Authentication (Who are you?)
  â†’ HTTP Basic: Authorization: Basic base64(email:password)
  â†’ CustomUserDetailsService loads user from database

Layer 2: Authorization (Are you allowed?)
  â†’ Controller checks ensureUserMatches(userId)
  â†’ Returns 403 Forbidden if user doesn't own resource

Layer 3: Data Scoping (Can't access what doesn't exist)
  â†’ All repository queries include userId
  â†’ Database-level protection

HTTP STATUS CODES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
201 Created             â†’ Resource created successfully
200 OK                  â†’ Request succeeded with data
204 No Content          â†’ Request succeeded, no data (e.g., DELETE)
400 Bad Request         â†’ Validation failed or invalid input
401 Unauthorized        â†’ Not authenticated or bad credentials
403 Forbidden           â†’ Authenticated but not allowed
404 Not Found           â†’ Resource doesn't exist
409 Conflict            â†’ Duplicate (e.g., email already registered)

ğŸ“š KEY CONCEPTS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Entity vs DTO
  Entity: Internal database model (never expose in API)
  DTO: External data contract (request/response)

Optional (null-safe)
  findByEmail() returns Optional<User>
  user.ifPresent(...) or user.orElseThrow(...)

Spring Data JPA Query Methods
  findByEmail() â†’ SELECT * FROM users WHERE email = ?
  findByCounterIdAndUserId() â†’ SELECT * WHERE id=? AND user_id=?

@Valid Validation
  @Valid on @RequestBody triggers validation
  Validation fails â†’ 400 Bad Request

MapStruct Code Generation
  @Mapper generates entityâ†’DTO conversion at compile time
  Password field not in DTO â†’ password never copied

ğŸ’» TESTING WITH CURL
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# Register
curl -X POST http://localhost:8080/api/users \
  -H "Content-Type: application/json" \
  -d '{"email":"atin@dev.com","username":"atin","password":"secure123"}'

# Create counter (with auth)
curl -X POST http://localhost:8080/api/users/1/counters \
  -u atin@dev.com:secure123 \
  -H "Content-Type: application/json" \
  -d '{"counterName":"Push-ups","counterValue":0}'

# List counters
curl -X GET http://localhost:8080/api/users/1/counters \
  -u atin@dev.com:secure123

# Update counter
curl -X PATCH http://localhost:8080/api/users/1/counters/1 \
  -u atin@dev.com:secure123 \
  -H "Content-Type: application/json" \
  -d '{"counterValue":25}'

# Increment counter
curl -X PATCH http://localhost:8080/api/users/1/counters/1/increment \
  -u atin@dev.com:secure123 \
  -H "Content-Type: application/json" \
  -d '{"incrementBy":5}'

# Delete counter
curl -X DELETE http://localhost:8080/api/users/1/counters/1 \
  -u atin@dev.com:secure123

ğŸ“Š DATABASE SCHEMA
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
users table                    counters table
â”œâ”€ user_id (PK)              â”œâ”€ counter_id (PK)
â”œâ”€ email (UNIQUE)            â”œâ”€ counter_name
â”œâ”€ username                  â”œâ”€ counter_value
â”œâ”€ password                  â”œâ”€ user_id (FK â†’ users)
â”œâ”€ created_at                â”œâ”€ created_at
â””â”€ updated_at                â””â”€ updated_at

Relationship: One user â†’ Many counters (1:N)

ğŸ¯ QUICK LEARNING PATH
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1. Read README_START_HERE.md (5 min)
2. Read ARCHITECTURE_GUIDE.md (15 min)
3. Read each package README in order (45 min)
4. Read inline comments in Java files (20 min)
5. Run application and test endpoints (15 min)

Total: ~100 minutes to master the architecture

âš ï¸ WHAT'S NOT PRODUCTION-READY
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âŒ NoOpPasswordEncoder (plaintext passwords)  â†’ Use BCryptPasswordEncoder
âŒ HTTP Basic (credentials every request)    â†’ Use JWT tokens
âŒ No @Transactional (transaction safety)    â†’ Add @Transactional
âŒ No centralized error handling             â†’ Use @ControllerAdvice
âŒ No logging                                 â†’ Add SLF4J
âŒ No rate limiting                           â†’ Add rate limiter
âŒ No tests                                   â†’ Add unit & integration tests

âœ… WHAT'S PRODUCTION-GRADE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… Security architecture (three layers)
âœ… User ownership verification
âœ… Input validation (@Valid)
âœ… Clean architecture patterns
âœ… Dependency injection
âœ… JPA/Hibernate best practices
âœ… REST API design
âœ… Error handling with status codes

ğŸš€ COMMANDS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# Start application
./mvnw spring-boot:run

# Run tests
./mvnw test

# Build JAR
./mvnw clean package

# View dependencies
./mvnw dependency:tree

Remember: This is a museum, not production code. Learn the patterns!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Last Updated: 2025-01-18 | Version: 1.0 | Status: Complete Documentation
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
